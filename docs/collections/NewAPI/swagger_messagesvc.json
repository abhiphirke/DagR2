{"swagger":"2.0","info":{"version":"v1","title":"Message API","description":"Message Commitment API to expose related information and perform relevant Nova operations."},"basePath":"/tieto/collection/messagesvc","paths":{"/Messages/{actionType}/to/{entityType}/{objectId}":{"get":{"tags":["Messages"],"summary":"Gets message based on receiver or sender type.","operationId":"GetMessages","consumes":[],"produces":["text/plain","application/json","text/json"],"parameters":[{"name":"actionType","in":"path","description":"Message sent or received","required":true,"type":"string","enum":["sent","received"]},{"name":"entityType","in":"path","description":"Message sender or receiver entity type","required":true,"type":"string","enum":["collector","creditor","debtor"]},{"name":"objectId","in":"path","description":"Message sender or receiver Id","required":true,"type":"integer","format":"int32"},{"name":"objectSubId","in":"query","description":"Creditor department number if the message sender or receiver type is ‘creditor’","required":false,"type":"integer","format":"int32"},{"name":"PageNumber","in":"query","required":false,"type":"integer","format":"int32"},{"name":"PageSize","in":"query","required":false,"type":"integer","format":"int32"},{"name":"includeNames","in":"query","description":"Includes names of message receiver and sender with response if the default value is true","required":false,"type":"boolean","default":false}],"responses":{"200":{"description":"Message retrieved successfully","schema":{"$ref":"#/definitions/MessageDTO"}},"204":{"description":"No records found"},"400":{"description":"Incorrect input parameters"},"401":{"description":"Unauthorized request"},"500":{"description":"The server encountered an error while processing the request"}}}},"/Messages/{messageId}":{"get":{"tags":["Messages"],"summary":"Get Message by message id.","operationId":"GetMessageById","consumes":[],"produces":["text/plain","application/json","text/json"],"parameters":[{"name":"messageId","in":"path","description":"","required":true,"type":"integer","format":"int32"}],"responses":{"200":{"description":"Message retrieved successfully","schema":{"$ref":"#/definitions/MessageDTO"}},"204":{"description":"No records found"},"400":{"description":"Incorrect input parameters"},"401":{"description":"Unauthorized request"},"500":{"description":"The server encountered an error while processing the request"}}}},"/Messages":{"post":{"tags":["Messages"],"summary":"Sends message to debtor or creditor","operationId":"SendMessage","consumes":["application/json-patch+json","application/json","text/json","application/*+json"],"produces":[],"parameters":[{"name":"message","in":"body","description":"","required":false,"schema":{"$ref":"#/definitions/MessageDTO"}}],"responses":{"200":{"description":"Message saved successfully"},"400":{"description":"Incorrect input parameters"},"401":{"description":"Unauthorized request"},"500":{"description":"The server encountered an error while processing the request"}}}},"/Messages/{messageId}/readdate":{"put":{"tags":["Messages"],"summary":"Update message read date","operationId":"UpdateReadDate","consumes":["application/json-patch+json","application/json","text/json","application/*+json"],"produces":[],"parameters":[{"name":"messageId","in":"path","description":"Id of message","required":true,"type":"integer","format":"int32"},{"name":"date","in":"body","description":"Message read date","required":false,"schema":{"format":"date-time","type":"string"}}],"responses":{"200":{"description":"Date updated successfully"},"401":{"description":"Unauthorized request"},"500":{"description":"The server encountered an error while processing the request"}}}},"/Messages/search":{"get":{"tags":["Messages"],"summary":"Search message by collector, creditor or debtor.","operationId":"SearchMessage","consumes":[],"produces":["text/plain","application/json","text/json"],"parameters":[{"name":"searchBy","in":"query","description":"Search message sent or received by collector, debtor or creditor","required":true,"type":"string","enum":["collector","creditor","debtor"]},{"name":"userId","in":"query","description":"Nova collector Id, creditor Id or debtor Id","required":true,"type":"integer","format":"int32"},{"name":"depNo","in":"query","description":"Department number when searching content by creditor","required":false,"type":"integer","format":"int32"},{"name":"searchContent","in":"query","description":"Search content","required":false,"type":"string"},{"name":"PageNumber","in":"query","required":false,"type":"integer","format":"int32"},{"name":"PageSize","in":"query","required":false,"type":"integer","format":"int32"}],"responses":{"200":{"description":"Data retrieved successfully","schema":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/MessageDTO"}}},"204":{"description":"No records found"},"400":{"description":"Incorrect input parameters"},"401":{"description":"Unauthorized request"},"500":{"description":"The server encountered an error while processing the request"}}}}},"definitions":{"MessageDTO":{"type":"object","properties":{"id":{"format":"int32","type":"integer"},"parentMessageId":{"format":"int32","type":"integer"},"originalMessageId":{"format":"int32","type":"integer"},"sendDate":{"format":"date-time","type":"string"},"subject":{"type":"string"},"body":{"type":"string"},"senderId":{"format":"int32","type":"integer"},"senderSubId":{"format":"int32","type":"integer"},"senderType":{"enum":["collector","creditor","debtor"],"type":"string"},"receiver":{"$ref":"#/definitions/ReceiverDTO"}}},"ReceiverDTO":{"type":"object","properties":{"receiverId":{"format":"int32","type":"integer"},"receiverSubId":{"format":"int32","type":"integer"},"receiverType":{"enum":["collector","creditor","debtor"],"type":"string"},"readDate":{"format":"date-time","type":"string"}}}},"securityDefinitions":{"Bearer":{"name":"Authorization","in":"header","type":"apiKey","description":"Authorization header using the Bearer scheme. Example: \"Authorization: Bearer {token}\""}},"security":[{"Bearer":[]}]}