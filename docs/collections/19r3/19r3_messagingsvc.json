{"swagger":"2.0","info":{"version":"19r3","title":"Messaging API","description":"Messaging API provides the means to exchange messages between collector and debtor or creditor."},"basePath":"/tieto/collection/messagingsvc","paths":{"/messages":{"get":{"tags":["Messages"],"summary":"Gets message based on receiver or sender type","operationId":"GetMessagesAsync","consumes":[],"produces":["text/plain","application/json","text/json"],"parameters":[{"name":"actionType","in":"query","description":"Message sent or received","required":true,"type":"string","enum":["sent","received"]},{"name":"entityType","in":"query","description":"Message sender or receiver entity type","required":true,"type":"string","enum":["collector","creditor","debtor"]},{"name":"objectId","in":"query","description":"Message sender or receiver Id","required":true,"type":"integer","format":"int32"},{"name":"objectSubId","in":"query","description":"Creditor department number if the message sender or receiver type is ‘creditor’","required":false,"type":"integer","format":"int32"},{"name":"PageNumber","in":"query","description":"Page number","required":false,"type":"integer","format":"int32"},{"name":"PageSize","in":"query","description":"Number of records per page","required":false,"type":"integer","format":"int32"},{"name":"includeNames","in":"query","description":"Includes names of message receiver and sender with response if the default value is true","required":false,"type":"boolean","default":false}],"responses":{"200":{"description":"Message retrieved successfully","schema":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/MessageDto"}}},"204":{"description":"No records found"},"400":{"description":"Incorrect input parameters"},"401":{"description":"Unauthorized request"},"500":{"description":"The server encountered an error while processing the request"}}},"post":{"tags":["Messages"],"summary":"Sends message to debtor or creditor","operationId":"MessageAsync","consumes":["application/json-patch+json","application/json","text/json","application/*+json"],"produces":[],"parameters":[{"name":"message","in":"body","description":"","required":false,"schema":{"$ref":"#/definitions/MessageDto"}}],"responses":{"200":{"description":"Message saved successfully"},"400":{"description":"Incorrect input parameters"},"401":{"description":"Unauthorized request"},"500":{"description":"The server encountered an error while processing the request"}}}},"/messages/{id}":{"get":{"tags":["Messages"],"summary":"Get Message by message id","operationId":"GetMessageByIdAsync","consumes":[],"produces":["text/plain","application/json","text/json"],"parameters":[{"name":"id","in":"path","description":"","required":true,"type":"integer","format":"int32"}],"responses":{"200":{"description":"Message retrieved successfully","schema":{"$ref":"#/definitions/MessageDto"}},"204":{"description":"No records found"},"400":{"description":"Incorrect input parameters"},"401":{"description":"Unauthorized request"},"500":{"description":"The server encountered an error while processing the request"}}}},"/messages/{messageId}/readdate":{"put":{"tags":["Messages"],"summary":"Update message read date","operationId":"UpdateReadDateAsync","consumes":["application/json-patch+json","application/json","text/json","application/*+json"],"produces":[],"parameters":[{"name":"messageId","in":"path","description":"Id of message","required":true,"type":"integer","format":"int32"},{"name":"date","in":"body","description":"Message read date","required":false,"schema":{"format":"date-time","type":"string"}}],"responses":{"200":{"description":"Date updated successfully"},"401":{"description":"Unauthorized request"},"500":{"description":"The server encountered an error while processing the request"}}}},"/messages/search":{"get":{"tags":["Messages"],"summary":"Search message by collector, creditor or debtor.","operationId":"SearchMessageAsync","consumes":[],"produces":["text/plain","application/json","text/json"],"parameters":[{"name":"searchBy","in":"query","description":"Search message sent or received by collector, debtor or creditor","required":true,"type":"string","enum":["collector","creditor","debtor"]},{"name":"userId","in":"query","description":"Nova collector Id, creditor Id or debtor Id","required":true,"type":"integer","format":"int32"},{"name":"depNo","in":"query","description":"Department number when searching content by creditor","required":false,"type":"integer","format":"int32"},{"name":"searchContent","in":"query","description":"Search content","required":false,"type":"string"},{"name":"PageNumber","in":"query","description":"Page number","required":false,"type":"integer","format":"int32"},{"name":"PageSize","in":"query","description":"Number of records per page","required":false,"type":"integer","format":"int32"}],"responses":{"200":{"description":"Data retrieved successfully","schema":{"$ref":"#/definitions/MessageDto"}},"204":{"description":"No records found"},"400":{"description":"Incorrect input parameters"},"401":{"description":"Unauthorized request"},"500":{"description":"The server encountered an error while processing the request"}}}}},"definitions":{"MessageDto":{"description":"Message to send","required":["parentMessageId","originalMessageId","sendDate","subject","body","senderId","senderType","receiver"],"type":"object","properties":{"id":{"format":"int32","description":"Id of Message","type":"integer"},"parentMessageId":{"format":"int32","description":"Id of parent message","type":"integer"},"originalMessageId":{"format":"int32","description":"Id of Original message","type":"integer"},"sendDate":{"format":"date-time","description":"Date on which the message was sent","type":"string"},"subject":{"description":"Message subject","type":"string"},"body":{"description":"Message Body","type":"string"},"senderId":{"format":"int32","description":"Id of sender of message","type":"integer"},"senderType":{"description":"Type Of sender : 1=Collector; 2=Creditor; 3=Debtor;","enum":["collector","creditor","debtor"],"type":"string"},"senderSubId":{"format":"int32","description":"Department Id of creditor","type":"integer"},"receiver":{"$ref":"#/definitions/ReceiverDto","description":"Message receiver"}}},"ReceiverDto":{"description":"Message receiver information","required":["receiverId","receiverType"],"type":"object","properties":{"receiverId":{"format":"int32","description":"Message receiver id","type":"integer"},"receiverSubId":{"format":"int32","description":"Department Id of creditor","type":"integer"},"receiverType":{"description":"Type of message receiver : 1=Collector; 2=Creditor; 3=Debtor","enum":["collector","creditor","debtor"],"type":"string"},"readDate":{"format":"date-time","description":"Message read date","type":"string"}}}},"securityDefinitions":{"Bearer":{"name":"Authorization","in":"header","type":"apiKey","description":"Authorization header using the Bearer scheme. Example: \"Authorization: Bearer {token}\""}},"security":[{"Bearer":[]}]}